<!DOCTYPE html>
<html lang="en">

  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title> of nota </title>

  <link rel="stylesheet" href="use/sheets/base.css">

  <main>
    <nota-list :items="titles"></nota-list>
    <nota-editor :title="title" :content="content"></nota-editor>
  </main>

  <script src="use/scripts/util.js"></script>
  <script src="http://cdnjs.cloudflare.com/ajax/libs/vue/1.0.18/vue.js"></script>
  <script src="https://cdn.rawgit.com/simplesmiler/vue-focus/0.1.1/dist/vue-focus.min.js"></script>
  
  
  <link rel="import" href="use/components/nota-list.html">
  <link rel="import" href="use/components/nota-editor.html">

  <script>
    'use strict'

    Vue.config.debug = true
    Vue.config.delimiters = [ '{' , '}' ]

    let notae;
    
    // try {
      // notae = JSON.parse( localStorage.notae )
    // }  catch(er) {
      notae = {
        'An':   { content: [ 'duup' , 'lex' ] },
        'note': { content: [ 'hely' ] },
        'for':  { content: [ 'tropic' ] },
        'thee': { content: [ 'yuna' ] },
      }
    // }
      

    const vm = new Vue({
      el: 'main',

      data: {
        title: '',
        content: [],

        notae,
      },

      computed: {
        titles() { return Object.keys( this.notae ) },
      },

      events: {
        nota(data) {
          this.title = data.title
          this.content = this.notae[ data.title ].content
        },
        
        edit(data) {
          this.notae[ data.original ] = {
            title: data.title,
            content: data.content,
          }
        },
      },
    })
    
    // window.onbeforeunload = () => localStorage.notae = JSON.stringify( vm.$data.notae )
  </script>

</html>
