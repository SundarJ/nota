<!DOCTYPE html>
<html lang="en">

  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title> of nota </title>

  <link rel="stylesheet" href="use/sheets/base.css">

  <main>
    <nota-list :items="notae"></nota-list>
    <nota-editor :item="nota"></nota-editor>
  </main>

  <script src="use/scripts/util.js"></script>
  <script src="http://cdnjs.cloudflare.com/ajax/libs/vue/1.0.18/vue.js"></script>
  <script src="https://cdn.rawgit.com/simplesmiler/vue-focus/0.1.1/dist/vue-focus.min.js"></script>
  
  
  <link rel="import" href="use/components/nota-list.html">
  <link rel="import" href="use/components/nota-editor.html">

  <script>
    'use strict'

    Vue.config.debug = true
    Vue.config.delimiters = [ '{' , '}' ]

    let notae;
    
    // try {
      // notae = JSON.parse( localStorage.notae )
    // }  catch(er) {
      notae = [
        { id: u.uid() , title: 'An'   , content: [ 'duup' , 'lex' ] },
        { id: u.uid() , title: 'note' , content: [ 'hely' ] },
        { id: u.uid() , title: 'for'  , content: [ 'tropic' ] },
        { id: u.uid() , title: 'thee' , content: [ 'yuna' ] },
      ]
    // }
      

    const vm = new Vue({
      el: 'main',

      data: {
        nota: null,
        notae,
      },

      events: {
        nota(data) {
          this.nota = this.notae.filter(nota => nota.id === data.id)[0]
        },
        
        edit(data) {
          this.notae.forEach(nota => {
            if ( nota.id === data.id ) {
              this.notae.title = data.title
              this.notae.content = data.content
            }
          })
        },
      },
    })
    
    // window.onbeforeunload = () => localStorage.notae = JSON.stringify( vm.$data.notae )
  </script>

</html>
